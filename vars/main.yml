---
# vars file for roundcubemailmail
_roundcubemail_requirements:
  default:
    - php-mysql
    - php-mcrypt
  Alpine:
    - php7-mysqli
    - php7-mcrypt
  Archlinux:
    - php-gd
  Debian:
    - php-mysql
    - dbconfig-no-thanks
  Suse:
    - php7-mysql
  RedHat-7:
    - php-mcrypt
    - php-cli
    - php-gd
    - php-curl
    - php-xml
    - php-mysql
    - php-mbstring
    - php-pspell
    - php-pecl-imagick
  RedHat:
    - php-cli
    - php-gd
    - php-curl
    - php-xml
    - php-mysqlnd
    - php-mbstring

roundcubemail_requirements: "{{ _roundcubemail_requirements[ansible_os_family] | default(_roundcubemail_requirements[ansible_os_family ~ '-' ~ ansible_distribution_major_version] | default(_roundcubemail_requirements['default'])) }}"

_roundcubemail_packages:
  default:
    - roundcubemail
  Archlinux:
    - roundcubemail
  Debian:
    - roundcube

roundcubemail_packages: "{{ _roundcubemail_packages[ansible_os_family] | default(_roundcubemail_packages['default']) }}"

_roundcubemail_conf_dir:
  default: /etc/roundcubemail
  Archlinux: /etc/webapps/roundcubemail/config
  Debian: /etc/roundcube

roundcubemail_conf_dir: "{{ _roundcubemail_conf_dir[ansible_os_family] | default(_roundcubemail_conf_dir['default']) }}"

_roundcubemail_owner:
  default: http
  Alpine: apache
  Archlinux: root
  Debian: www-data
  RedHat: apache
  Suse: root

roundcubemail_owner: "{{ _roundcubemail_owner[ansible_os_family] | default(_roundcubemail_owner['default']) }}"

_roundcubemail_group:
  default: apache
  Alpine: root
  Archlinux: root
  Debian: www-data
  RedHat: apache
  Suse: root

roundcubemail_group: "{{ _roundcubemail_group[ansible_os_family] | default(_roundcubemail_group['default']) }}"

_roundcubemail_mode:
  default: "0640"
  Alpine: "0644"
  Archlinux: "0644"
  Suse: "0644"

roundcubemail_mode: "{{ _roundcubemail_mode[ansible_os_family] | default(_roundcubemail_mode['default']) }}"

roundcubemail_database_url: mysql://{{ roundcubemail_database_user }}:{{ roundcubemail_database_password }}@{{ roundcubemail_database_host }}/{{ roundcubemail_database_name }}

_roundcubemail_database_target:
  default: /usr/share/roundcubemail/SQL/mysql.initial.sql
  Archlinux: /usr/share/webapps/roundcubemail/SQL/mysql.initial.sql
  Debian: /usr/share/roundcube/SQL/mysql.initial.sql

roundcubemail_database_target: "{{ _roundcubemail_database_target[ansible_os_family] | default(_roundcubemail_database_target['default']) }}"

roundcubemail_file: config.inc.php

_roundcubemail_httpd_configuration:
  default: /etc/httpd/conf.d/roundcube.conf
  Alpine: /etc/apache2/conf.d/roundcube.conf
  Archlinux: /etc/httpd/conf/extra/roundcube.conf
  Debian: /etc/apache2/conf-enabled/roundcube.conf
  RedHat: /etc/httpd/conf.d/roundcubemail.conf
  Suse: /etc/apache2/conf.d/roundcubemail.conf

roundcubemail_httpd_configuration: "{{ _roundcubemail_httpd_configuration[ansible_os_family] | default(_roundcubemail_httpd_configuration['default']) }}"
